<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>æ–¯æ™®æ‹‰é3 æ™ºèƒ½éšæœºæ­¦å™¨</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{
  margin:0;
  background:#0b1020;
  color:#fff;
  font-family:system-ui;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
}
.app{
  width:340px;
  background:#020617;
  padding:24px;
  border-radius:20px;
  text-align:center;
}
h1{font-size:20px;margin-bottom:12px;}
.roulette{
  height:64px;
  line-height:64px;
  background:#1e293b;
  border-radius:14px;
  margin-bottom:12px;
  font-size:20px;
}
.result{font-size:14px;line-height:1.8;}
.actions{margin-top:14px;}
button{
  width:100%;
  padding:12px;
  margin-top:8px;
  border:none;
  border-radius:12px;
  font-size:15px;
  cursor:pointer;
}
.start{background:#22c55e;color:#000;}
.yes{background:#3b82f6;}
.no{background:#ef4444;}
</style>
</head>
<body>

<div class="app">
  <h1>ğŸ® æ–¯æ™®æ‹‰é3 æ™ºèƒ½éšæœºæ­¦å™¨</h1>

  <div class="roulette" id="roulette">ç‚¹å‡»å¼€å§‹</div>

  <div class="result">
    ä¸»æ­¦ï¼š<span id="name">-</span><br>
    å‰¯æ­¦ï¼š<span id="sub">-</span><br>
    å¤§æ‹›ï¼š<span id="special">-</span>
  </div>

  <div class="actions">
    <button class="start" id="start">å¼€å§‹éšæœº</button>
    <button class="yes" id="yes" style="display:none;">ğŸ‘ å–œæ¬¢è¿™ç±»æ­¦å™¨</button>
    <button class="no" id="no" style="display:none;">ğŸ‘ ä¸å–œæ¬¢è¿™ç±»æ­¦å™¨</button>
  </div>
</div>

<script>
/* ================= æ­¦å™¨æ•°æ® ================= */

const weapons = [
  {name:"N-ZAP85",category:"å°„å‡»æª",sub:"ä¸‰è§’é›·",special:"èƒ½é‡é¥®æ–™"},
  {name:"52åŠ ä»‘",category:"å°„å‡»æª",sub:"ç‚¹çŠ¶ç‚¸å¼¹",special:"é²¨é±¼åéª‘"},
  {name:"å–·å°„æ¸…æ´æª",category:"å°„å‡»æª",sub:"æ¯’é›¾",special:"å¤šé‡å¯¼å¼¹"},
  {name:"æ–¯æ™®æ‹‰æ»šç­’",category:"æ»šç­’",sub:"å·å¸˜ç‚¸å¼¹",special:"é²¨é±¼åéª‘"},
  {name:"ç¢³çº¤ç»´æ»šç­’",category:"æ»šç­’",sub:"æœºå™¨äººç‚¸å¼¹",special:"ç»ˆæå‘å°„"},
  {name:"æ–¯æ™®æ‹‰ç‹™å‡»æª",category:"ç‹™å‡»æª",sub:"æ´’å¢¨å™¨",special:"å¢å‹å™¨"},
  {name:"å·´å‹ƒç½—",category:"åˆ·å­",sub:"æœºå™¨äººç‚¸å¼¹",special:"å¢¨é›¨"},
  {name:"æ–¯æ™®æ‹‰æ¡¶",category:"æ¡¶",sub:"ç‚¹çŠ¶ç‚¸å¼¹",special:"å¢¨é›¨"}
];

/* ================= æƒé‡ç³»ç»Ÿ ================= */

const categoryWeight = {};

weapons.forEach(w=>{
  if(!categoryWeight[w.category]){
    categoryWeight[w.category]=1;
  }
});

function weightedRandom(){
  const pool=[];
  weapons.forEach(w=>{
    const weight=Math.max(0.1,categoryWeight[w.category]);
    const count=Math.round(weight*10);
    for(let i=0;i<count;i++) pool.push(w);
  });
  return pool[Math.floor(Math.random()*pool.length)];
}

/* ================= äº¤äº’é€»è¾‘ ================= */

const roulette=document.getElementById("roulette");
const startBtn=document.getElementById("start");
const yesBtn=document.getElementById("yes");
const noBtn=document.getElementById("no");

const nameEl=document.getElementById("name");
const subEl=document.getElementById("sub");
const specialEl=document.getElementById("special");

let currentWeapon=null;

startBtn.onclick=()=>{
  let count=0;
  let max=30+Math.floor(Math.random()*20);
  const timer=setInterval(()=>{
    currentWeapon=weightedRandom();
    roulette.innerText=currentWeapon.name;
    count++;
    if(count>=max){
      clearInterval(timer);
      nameEl.innerText=currentWeapon.name;
      subEl.innerText=currentWeapon.sub;
      specialEl.innerText=currentWeapon.special;
      yesBtn.style.display="block";
      noBtn.style.display="block";
    }
  },80);
};

yesBtn.onclick=()=>{
  categoryWeight[currentWeapon.category]*=0.7;
  yesBtn.style.display=noBtn.style.display="none";
};

noBtn.onclick=()=>{
  categoryWeight[currentWeapon.category]*=1.3;
  yesBtn.style.display=noBtn.style.display="none";
};
</script>

</body>
</html>
